(()=>{"use strict";const e=document.getElementById("stopwatch");let t=null,n=0,a=0,o=!1,r=document.getElementById("task-name-input"),l=document.getElementById("start-button"),d=document.getElementById("stop-button"),c=document.getElementById("project-selector"),i=document.getElementById("task-list-wrapper"),s=document.getElementById("add-project-button"),m=document.getElementById("project-name-input"),u=function(){const e=new Date;return e.setDate(e.getDate()),e.toISOString().split("T")[0]}(),p=JSON.parse(localStorage.getItem("projects"))||[],g=JSON.parse(localStorage.getItem("tasks"))||[];function E(){i.innerHTML="",clearInterval(t),a=Date.now()-n,o=!1;for(let l of g){let d=document.createElement("div");d.id="task-wrapper";let c=document.createElement("h3");c.id="task-name",c.innerText=l.taskName;let s=document.createElement("p");s.id="project-name",s.innerText=l.projectName;let m=document.createElement("p");m.id="task-time",m.innerText=l.time;let u=document.createElement("button");u.setAttribute("type","button"),u.innerText="Delete task",u.addEventListener("click",function(e){return function(){g=g.filter((t=>t.id!==e)),localStorage.setItem("tasks",JSON.stringify(g)),E()}}(l.id)),d.append(c,s,m,u),i.append(d),clearInterval(t),n=0,a=0,o=!1,e.innerText="00:00:00",r.value=""}}function S(){const t=Date.now();a=t-n;let o=Math.floor(a/36e5),r=Math.floor(a/6e4%60),l=Math.floor(a/1e3%60);o=String(o).padStart(2,"0"),r=String(r).padStart(2,"0"),l=String(l).padStart(2,"0"),e.textContent=`${o}:${r}:${l}`}!function(){for(let e of p){let t=document.createElement("option");t.innerText=e.name,c.append(t),console.log(t.innerText)}}(),l.addEventListener("click",(()=>{o||(a=0,n=Date.now(),t=setInterval(S,10),o=!0,localStorage.removeItem("time"),d.classList.remove("hidden"),l.classList.add("hidden"))})),d.addEventListener("click",(()=>{const t=Date.now();""!==r.value.trim()&&(g.push({id:t,taskName:r.value,projectName:c.value,time:e.textContent,date:u}),localStorage.setItem("tasks",JSON.stringify(g)),d.classList.add("hidden"),l.classList.remove("hidden"),E())})),s.addEventListener("click",(()=>{let e=document.createElement("option");e.innerText=m.value,c.append(e);const t=Date.now();p.push({id:t,name:m.value}),localStorage.setItem("projects",JSON.stringify(p))})),document.addEventListener("DOMContentLoaded",E)})();